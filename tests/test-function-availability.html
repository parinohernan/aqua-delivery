<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Funci√≥n generarInforme</title>
</head>
<body>
    <h1>Test de Disponibilidad de Funci√≥n</h1>
    
    <div id="test-results">
        <p>Cargando tests...</p>
    </div>

    <button id="testBtn">Probar generarInforme</button>

    <script>
        // Simular la funci√≥n generarInforme como est√° en index.astro
        async function generarInforme() {
            console.log('üéâ generarInforme ejecutada correctamente!');
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<p style="color: green;">‚úÖ Funci√≥n generarInforme funciona correctamente!</p>';
            return true;
        }

        // Hacer la funci√≥n disponible globalmente
        window.generarInforme = generarInforme;

        // Test de disponibilidad
        function testFunctionAvailability() {
            const resultsDiv = document.getElementById('test-results');
            let results = '<h2>Resultados del Test:</h2>';
            
            // Test 1: Verificar si la funci√≥n existe
            if (typeof window.generarInforme === 'function') {
                results += '<p style="color: green;">‚úÖ window.generarInforme est√° definida</p>';
            } else {
                results += '<p style="color: red;">‚ùå window.generarInforme NO est√° definida</p>';
            }
            
            // Test 2: Verificar si se puede ejecutar
            try {
                if (typeof generarInforme === 'function') {
                    results += '<p style="color: green;">‚úÖ generarInforme es accesible directamente</p>';
                } else {
                    results += '<p style="color: red;">‚ùå generarInforme NO es accesible directamente</p>';
                }
            } catch (error) {
                results += '<p style="color: red;">‚ùå Error accediendo a generarInforme: ' + error.message + '</p>';
            }
            
            resultsDiv.innerHTML = results;
        }

        // Configurar event listener cuando la p√°gina est√© cargada
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ P√°gina cargada, ejecutando tests...');
            testFunctionAvailability();
            
            // Configurar bot√≥n de prueba
            const testBtn = document.getElementById('testBtn');
            if (testBtn) {
                testBtn.addEventListener('click', function() {
                    console.log('üîç Probando ejecuci√≥n de generarInforme...');
                    if (typeof window.generarInforme === 'function') {
                        window.generarInforme();
                    } else {
                        console.error('‚ùå generarInforme no est√° disponible');
                        alert('generarInforme no est√° disponible');
                    }
                });
            }
        });
    </script>
</body>
</html>
